# The config recipe.
# https://rasa.com/docs/rasa/model-configuration/
#recipe: default.v1
#
## Configuration for Rasa NLU.
## https://rasa.com/docs/rasa/nlu/components/
#language: ru
#
#pipeline:
#  - name: FallbackClassifier
#    threshold: 0.3
#  - name: WhitespaceTokenizer
#  - name: CountVectorsFeaturizer
#    analyzer: char_wb
#    min_ngram: 1
#    max_ngram: 4
#  - name: RegexFeaturizer
#
#  - name: DIETClassifier
#    epochs: 200
#    constrain_similarities: true
#
#
#policies:
#  - name: MemoizationPolicy
#    max_history: 10
#  - name: AugmentedMemoizationPolicy
#    max_history: 10
#  #- name: FallbackPolicy
#  # nlu_threshold: 0.3
#  #core_thresold: 0.3
#  #fallback_action_name: action_default_fallback
#  - name: TEDPolicy
#    evaluate_on_number_of_examples: 5
#    evaluate_every_number_of_epochs: 5
#    max_history: 5
#    epochs: 10
#  - name: RulePolicy
#    core_fallback_threshold: 0.3
#    core_fallback_action_name: "action_default_fallback"
#    enable_fallback_prediction: True


recipe: default.v1
assistant_id: example_bot
language: ru

pipeline:
   - name: WhitespaceTokenizer
   - name: RegexFeaturizer
     case_sensitive: False
   - name: RegexEntityExtractor
     case_sensitive: False
     use_lookup_tables: True
   - name: CountVectorsFeaturizer
   - name: CountVectorsFeaturizer
     analyzer: char_wb
     min_ngram: 1
     max_ngram: 4
   - name: DIETClassifier
     epochs: 100
     num_transformer_layers: 4
     transformer_size: 256
     use_masked_language_model: true
     drop_rate: 0.25
     weight_sparsity: 0.7
     batch_size: [ 64, 256 ]
     embedding_dimension: 120
     hidden_layer_sizes:
       text: [ 512, 128 ]
     entity_recognition: False
     model_confidence: softmax
     constrain_similarities: true
   - name: EntitySynonymMapper
   - name: ResponseSelector
     epochs: 100
     constrain_similarities: true
   - name: FallbackClassifier
     threshold: 0.3
     ambiguity_threshold: 0.1


policies:
   - name: MemoizationPolicy
   - name: RulePolicy
     core_fallback_threshold: 0.3
     core_fallback_action_name: "action_default_fallback"
     enable_fallback_prediction: True
   - name: UnexpecTEDIntentPolicy
     max_history: 5
     epochs: 100
   - name: TEDPolicy
     max_history: 5
     epochs: 100
     constrain_similarities: true
